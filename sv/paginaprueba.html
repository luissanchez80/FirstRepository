<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>SeventeenVideo Hack!</title>
		<link href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>		
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link href="https://seventeenlive.com/new/css/seventeenlive.css?t=225" rel="stylesheet">
		
		<style>
			.iconoRojo {
				color: #ff0000;
			}		
		</style>
    </head>
    <body>
		
	<label>ID: </label>
	<div class="form-group">
		<div class="col-sm-2">
			<input id="txtId" type="text" class="form-control" value="10496856" />
		</div>
		<button id="btnVer" class="btn col-sm-2">Ver</button><i class="fa fa-square"></i>
		<i class="fa fa-square"></i>
	</div>
	<div class="divTamanio">
		<label class="radio-inline"><input type="radio" name="tam" value="oculto">Oculto</label>
		<label class="radio-inline"><input type="radio" name="tam" value="chico" checked>Chico</label>
		<label class="radio-inline"><input type="radio" name="tam" value="mediano">Mediano</label>
		<label class="radio-inline"><input type="radio" name="tam" value="grande">Grande</label> 	
	</div>
	<br>
	<div class="divSonido">
		<label class="radio-inline"><input type="radio" name="son" value="si">Si</label>
		<label class="radio-inline"><input type="radio" name="son" value="no" checked>No</label>
	</div>
	<div class="divUrlOrigen">
		<label class="radio-inline"><input type="radio" name="url" value="1" checked>SF</label>
		<label class="radio-inline"><input type="radio" name="url" value="2" >17V</label>
	</div>	
	<br>
	<br>
	<div>
		<button id="btnOcultar" class='col-sm-3'>Ocultar!</button>
		<div class="col-sm-9">
			<a href="https://screencast-o-matic.com/screen_recorder" target="_blank">screencast</a>
		</div>
	<div>
	<br>
	<br>
	
	<div class="col-sm-6">
		<div id="divNombre">-</div>
		<div class="pantalla" style="width:438px; height:350px; border:solid 1px #000000;">
		</div>
		<div class="url"></div>
		<br>
		<br>

		<div class="chicas" style="width:100%; height:500px; border:solid 1px red; overflow:auto; max-height:100px;">		
		</div>
	</div>
		
	<div class="col-sm-6 catalogoChicas">		
		<div style="max-height:300px; overflow:auto;" class="linksChicas">
			<!--<button class="btn-link badge" data-id="10524319">Adri</button>		
			<button class="btn-link badge" data-id="10628055">yoko</button> -->
		</div>
	</div>
	
		<br><br>
	<div id="response" style="width:500px; height:300px; border: solid 1px #000000; overflow:auto; max-height:300px; visibility:hidden;">-</div>

	<br><br><br><br>	
	
	
        <a id="link" href="#">Click Test Link</a>

		
       
        <script type="text/javascript"> 
			var width = 438; //219;
			var height = 328; //164;
			var sonido = 0;
			var urlGral = 'https://www.secretfriends.com/';
							
			$(document).ready(function()
			{		
				$('#btnVer').click(function(){
					var id = $('#txtId').val();				
					verChica(id);
				});
				
				$('#btnOcultar').click(function(){
					VerEnIframe('.pantalla', 'http://google.com');				
				});	

				$('input[type="radio"][name="tam"]').change(function(){
					var valor = $(this).val();
				
					switch(valor)
					{
						case 'oculto':
							width = 109.5; 
							height = 82; 	
							break;
						case 'chico':
							width = 438; 
							height = 328; 	
							break;						
						case 'mediano':
							width = 876; 
							height = 656; 
							break;
						case 'grande':
							width = 1314; 
							height = 984; 						
						break;
					}
					$('#btnVer').click();
				});
				
				$('input[type="radio"][name="son"]').change(function(){
					var valor = $(this).val();

					switch(valor)
					{
						case 'si':
							sonido = 1;
							break;
						case 'no':
							sonido = 0;
							break;						
					}
					$('#btnVer').click();
				});
				
				
				$('input[type="radio"][name="url"]').change(function(){
					urlGral = ObtenerValorUrl($(this));	
					$('#btnVer').click();				
				});			
				
				function ObtenerValorUrl(objRadioButton)
				{
					var valor = $(objRadioButton).val();				
					var valorUrl;
					switch(valor)
					{
						case '1':
							valorUrl = 'https://www.secretfriends.com/';
							break;
						case '2':
							valorUrl = 'https://seventeenlive.com/';
							break;						
					}					
					return valorUrl;
				}
				
				ObtenerChicas();
				setInterval(function(){ ObtenerInofChicas(); }, 5000);

				$('#txtId').click(function()
				{
					$(this).select();
				});
				
				$('.linksChicas button').click(function(){				 
					var id = $(this).data('id'); 
				alert(id);
					$('#txtId').val(id); 
					$('#btnVer').click();  

					var nombre = TraeNombreChica(id);  
					$('#divNombre').html(nombre);  
				}); 
			
				var qstring = getUrlVars()['id'];
				if(qstring != undefined)
				{
					$('#txtId').val(qstring);
				}
				
			  $("#link").click(function(){
					TraerHtmlExterno();
				});
								
				setInterval(function(){ TraerHtmlExterno(); }, 5000);
			});		
			
			function ObtenerInofChicas()
			{
				$('.catalogoChicas .linksChicas').empty();

				$('#home-widget .col-xs-6.col-sm-4.col-md-3').each(function()
				{
					//id
					var id = $(this).find('.absolute').data('id');
					//nombre
					var nombre = $(this).find('.name-marker').html();
										
					//foto
					var fotoDiv = $(this).find('.placeholder-wrapper').html();								
					var foto = $(this).find('.placeholder-wrapper').first().css('background-image');
					foto = foto.replace('url(','').replace(')','').replace(/\"/gi, "");	
					//estatus   $('#home-widget .col-xs-6.col-sm-4.col-md-3').first().find('.model-tag').attr('class').split(' ')[1];
					var estatusDesc = $(this).find('.model-tag').attr('class').split(' ')[1];
									
					//icono
					var icono = $(this).find('.status-marker i').attr('class');
					
					
		

					var estatus = 0;
					var color = '';
					switch(estatusDesc)
					{
						case 'model-online': //verde
							estatus = 1
							color = 'iconoVerde';							
							break;
						case 'model-private': //rojo
							estatus = 2
							color = 'iconoRojo';
							break;
						case 'model-vip': //morado
							estatus = 3
							color = 'iconoMorado';	
							break;
						case 'model-premium': //amarillo
							estatus = 4
							break;			
					}
					
					if(estatus != 4 && nombre != undefined)
					{
					
						var str = "";
						str += '<div class="col-xs-4 col-sm-4 col-md-3 col-lg-2 grid-item"> ';
						str += '	<div class="overlay-wrapper model-wrapper">    ';            
						str += '		<div class="model-tag '+estatusDesc+'">';
						str += '			<div class="model-details">';
						str += '				<p style="float: inherit;">';
						str += '					<span class="status-marker"><i class="' + icono + ' '+ color +'"></i></span> ';
						str += '					<span class="name-marker"><button class="btn-link badge" data-id="' + id +  '" onclick="verChicaButton(' + id +  ')">' + nombre + ' - '+estatus+'</button></span>';
						str += '					<span class="hidden-xs model-price pull-right">&nbsp; </span>';
						str += '				</p> ';
						str += '			</div>';
						str += '		</div>     ';                   	
						str += '		<div class="hovereffect">      ';                                               
						str += '			<img src =\''+foto+'\' style="width:100px;" />';
						str += '		</div>';
						str += '	</div>  ';              
						str += '</div>		';	
						$('.catalogoChicas .linksChicas').append(str);				
					}
				});
			}


			function verChicaButton(id)
			{									
					<!-- var id = $(obj).data('id');  -->
				<!-- alert(id); -->
					$('#txtId').val(id); 
					$('#btnVer').click();  

					var nombre = TraeNombreChica(id);  
					$('#divNombre').html(nombre);  		
			}
			
			function verChica(id)
			{		
				var url = urlGral + '/share/friend?audio=' + sonido + '&controls=1&id=' + id;
				VerEnIframe('.pantalla', url);
				VerEnIframe('.chicas', urlGral, undefined, 500);	
						
				//VerEnIframe('#response', 'http://phptesting.gearhostpreview.com/grabber.php?url='+ urlGral, undefined, 500);	
			}
			
			function TraerHtmlExterno()
			{						
				var contentURI= 'https://seventeenlive.com #home-widget';    // URL TO GRAB + # of any desired element // if needed :)
				$('#response').load('http://phptesting.gearhostpreview.com/grabber.php?url='+ contentURI);				
			}
			
			function ObtenerChicas()
			{
				var divChicas = $('.chicas');
				$('#btnVer').click();
			}
			
			function VerEnIframe(url, divId, pwidth, pheight)
			{
				pheight = pheight == undefined ? 438 : pheight;
				pheight = pheight == undefined ? 328 : pheight;
				
				var pantalla = $(url);
				pantalla.css({ width: pwidth, height:pheight});
				pantalla.empty();
				var content = '<iframe src=\"' + divId + '" scrolling=\"no\" id=\"preview-iframe\" name=\"Live Cam Preview\" style=\"top:0px; left: 0px; pointer-events: none; border: 0px; width: ' + width + 'px; height: ' + height + 'px; \"></iframe>';     
				pantalla.append(content);			
			}
			
			function TraeNombreChica(id)
			{		
				var resultado = '-no se pudo obtener nombre-';
				var linksChicas = $('.linksChicas button');
				$('.linksChicas button').each(function()
				{			
					var idLoop = $(this).data('id');;
					if(idLoop == id)
						resultado = $(this).text();
				});
				
				return resultado;
			}
			
			function getUrlVars()
			{
				var vars = [], hash;
				var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
				for(var i = 0; i < hashes.length; i++)
				{
					hash = hashes[i].split('=');
					vars.push(hash[0]);
					vars[hash[0]] = hash[1];
				}
				return vars;
			}			
        </script> 
    </body>
</html>
